<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>Flask App</title>
		<style type="text/css">
			* {
				font-family: sans-serif;
			}
			img {
			    max-width: 180px;
			    max-height: 180px;
			}
			.painting_div {
			border-style: solid;
			height:200px;
			width:200px;
			padding:2%;
			}

			.painting_grid {
			max-width:200px;
			padding:0%;
			margin:0%;
			}
			.recommendations{
				display:grid;
				grid-gap: 0px;
				grid-template-columns: repeat(3, 1fr);

			}
		</style>
	</head>


    <body>
		<h1>Welcome to the TMoma</h1>
		<form method="post" id="form">
			<label for="num">Choose a painting:<br> </label>
			<input type="text" id="painting_id" name="painting_id" autofocus autocomplete="off">
			<button>submit</button>
		</form>



        <form method="post" id="recommend">
			<button id="recommend_button"">map my route!</button>
		</form>

        <p id="square">
        </p>

        <div class="recommendations">

			{% for item in data %}

				<div class="painting_div">
				<img src="static/img/{{ item }}.jpg" data-painting-id="{{ item }}">
				<p> {{item}}</p>
				</div>

            {% endfor %}

        </div>




        <script src="https://code.jquery.com/jquery-3.2.1.min.js">
        </script>

        <script>

			var arr = []
			$('#form').on('submit', function(e){
				var painting_id= $('#painting_id').val();
                e.preventDefault();
				$.ajax({
					url: 'http://127.0.0.1:5000/square/',
					data: {'painting_number': painting_id},
					method: 'POST',
					success: function(return_value) {
						$('#painting_id').val('');
						var images = '';
						console.log(images);
						for (x=0; x < return_value['result'].length; x++) {
						    console.log(return_value['result'][x]);

						    images += '<img class= "painting_div" src="static/img/' + return_value['result'][x] + '.jpg">';

						}
						$('#square').html('you chose: ' + painting_id + '<br><br> here are some other suggestions: <br><br> ' + images)
					    arr.push(painting_id);
					    }
				});
			});


			$('#recommend').on('click', function(e){
				e.preventDefault();
				$.ajax({
					url: 'http://127.0.0.1:5000/recommendations/',
					method: 'POST',
					success: function() {
						$('#recommendations').html('this is your route through the museum: ' + arr)
					}
				});
			});
		</script>


    </body>

</html>